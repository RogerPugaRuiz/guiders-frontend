/* Animaciones para los mensajes */
@keyframes slideFromRight {
	from { transform: translateX(20px); opacity: 0; }
	to { transform: translateX(0); opacity: 1; }
}

@keyframes slideFromLeft {
	from { transform: translateX(-20px); opacity: 0; }
	to { transform: translateX(0); opacity: 1; }
}

@keyframes fadeIn {
	from { opacity: 0; }
	to { opacity: 1; }
}

@keyframes spin {
	to {
		transform: translateY(-50%) rotate(360deg);
	}
}

.chat-messages {
	flex: 1;
	padding: var(--spacing-lg);
	overflow-y: auto;
	background-color: var(--color-background);
	display: flex;
	flex-direction: column;

	.start-conversation {
		margin-top: auto;
	}
}

.chat-date-separator {
	display: flex;
	align-items: center;
	justify-content: center;
	margin: var(--spacing-lg) 0;
	
	span {
		background-color: var(--color-background);
		color: var(--color-text-light);
		font-size: var(--font-size-xs);
		padding: 0 var(--spacing-md);
		position: relative;
		
		&:before {
			content: '';
			position: absolute;
			left: -50px;
			right: -50px;
			top: 50%;
			height: 1px;
			background-color: var(--color-border);
			z-index: -1;
		}
	}
}

.chat-message {
	display: flex;
	flex-direction: column;
	max-width: 70%;
	margin-bottom: var(--spacing-md);
	
	&--sent {
		align-self: flex-end;
		margin-left: auto;
		animation: slideFromRight 0.3s ease-out;
		
		.chat-message__content {
			background-color: var(--color-primary);
			color: white;
			border-radius: var(--border-radius) 0 var(--border-radius) var(--border-radius);
			box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
		}
		
		.chat-message__time {
			align-self: flex-end;
		}
	}
	
	&--received {
		align-self: flex-start;
		animation: slideFromLeft 0.3s ease-out;
		
		.chat-message__content {
			background-color: var(--color-background-secondary);
			border-radius: 0 var(--border-radius) var(--border-radius) var(--border-radius);
			box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
		}
		
		.chat-message__time {
			align-self: flex-start;
		}
	}
	
	&__content {
		padding: var(--spacing-md);
		border-radius: var(--border-radius);
		
		p {
			margin: 0;
			font-size: var(--font-size-sm);
		}
	}
	
	&__time {
		font-size: var(--font-size-xs);
		color: var(--color-text-light);
		margin-top: 4px;
	}
}

/* Estado vacío del chat */
.chat-empty-state {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	height: 100%;
	padding: 2rem;
	text-align: center;
	animation: fadeIn 0.3s ease-in;

	&__icon {
		margin-bottom: 1.5rem;
		color: var(--color-text-light);
		opacity: 0.6;

		svg {
			width: 48px;
			height: 48px;
		}
	}

	&__title {
		margin: 0 0 0.75rem 0;
		font-size: 1.5rem;
		font-weight: 600;
		color: var(--color-text);
	}

	&__description {
		margin: 0;
		max-width: 400px;
		line-height: 1.5;
		color: var(--color-text-light);
		font-size: 0.95rem;
	}
}

// Estados de carga y sin mensajes
.chat-loading, .chat-no-messages {
	display: flex;
	align-items: center;
	justify-content: center;
	flex-direction: column;
	padding: var(--spacing-xl);
	text-align: center;
	
	p {
		margin: 0;
		color: var(--color-text-light);
		font-size: 0.95rem;
		animation: fadeIn 0.3s ease-in-out;
	}
}

.chat-loading {
	p {
		position: relative;
		
		&::after {
			content: '';
			position: absolute;
			right: -20px;
			top: 50%;
			transform: translateY(-50%);
			width: 12px;
			height: 12px;
			border: 2px solid var(--color-primary);
			border-top-color: transparent;
			border-radius: 50%;
			animation: spin 1s linear infinite;
		}
	}
}

/* Estados de mensaje para programación positiva */
.chat-message {
	&--pending {
		opacity: 0.7;
		
		.chat-message__content {
			background-color: var(--color-surface-variant) !important;
			position: relative;
		}
		
		.chat-message__status {
			display: inline-flex;
			align-items: center;
			margin-left: var(--spacing-xs);
		}
		
		.chat-message__pending-icon {
			color: var(--color-text-light);
			animation: spin 1s linear infinite;
		}
	}
	
	&--confirmed {
		opacity: 1;
		
		.chat-message__content {
			transition: background-color 0.3s ease;
		}
	}
	
	// Animación suave para cuando el mensaje cambia de estado
	&--sent.chat-message--pending .chat-message__content {
		border: 1px dashed var(--color-primary-light);
	}
	
	&--sent.chat-message--confirmed .chat-message__content {
		border: none;
		background-color: var(--color-primary);
	}
}